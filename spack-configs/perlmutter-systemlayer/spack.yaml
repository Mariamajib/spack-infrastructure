# This is a Spack Environment file.
#
# It describes a set of packages to be installed, along with
# configuration settings.
spack:
  view: false
  config:
    build_stage: $tempdir/user/spack-stage
    install_path_scheme: '{name}/{version}-{hash:6}'
    install_tree:
      concretizer: clingo
      root: /global/common/software/spackecp/perlmutter/systemlayer/software
    module_roots:
      tcl: /global/common/software/spackecp/perlmutter/systemlayer/modules
  modules:
    enable:
    - tcl
    tcl:
      blacklist_implicits: true
      hash_length: 0
      naming_scheme: '{name}/{version}'
      all:
        conflict:
        - '{name}'
        environment:
          set:
            '{name}_ROOT': '{prefix}'
        suffixes:
          ^mpi: mpi
          ^cuda: cuda
      nvhpc:
        suffixes:
          +mpi: mpi
  compilers:
  - compiler:
      spec: gcc@7.5.0
      paths:
        cc: /usr/bin/gcc
        cxx: /usr/bin/g++
        f77: /usr/bin/gfortran
        fc: /usr/bin/gfortran
      flags: {}
      operating_system: sles15
      target: any
      modules: []
  definitions:
  - compilers:
    - gcc@11.2.0 +nvptx
    - gcc@10.3.0 +nvptx
    - gcc@9.4.0 +nvptx
    - nvhpc@21.9
    - nvhpc@21.9 +mpi
  - mpis:
    - openmpi@4.1.1 +cxx
    - openmpi@4.1.1 +cxx +cuda
    - mpich@3.4.2 +slurm
    - mpich@3.3.2 +slurm
    #- mvapich2@2.3.6 +cuda
  - cuda:
    - cuda@11.5.0
    - cuda@11.4.2
    - cuda@11.3.1
    - cuda@11.2.1
  - blas:
    - openblas@0.3.18
    - openblas@0.3.15
    - openblas@0.3.13
    - netlib-lapack@3.9.1
    - netlib-lapack@3.8.0
    - netlib-scalapack@2.1.0
  - fftw:
    - fftw@3.3.10 ~mpi precision=float,double,long_double
    - fftw@3.3.9 ~mpi precision=float,double,long_double
    - fftw@3.3.8 ~mpi precision=float,double,long_double
  specs:
  - $compilers
  - $mpis
  - $cuda
  - $blas
  - $fftw
  packages:
    all:
      compiler: [gcc@7.5.0]
    bzip2:
      version: [1.0.6]
      buildable: false
      externals:
      - spec: bzip2@1.0.6
        prefix: /usr
    diffutils:
      version: [3.6]
      buildable: false
      externals:
      - spec: diffutils@3.6
        prefix: /usr
    findutils:
      version: [4.6.0]
      externals:
      - spec: findutils@4.6.0
        prefix: /usr
    gettext:
      version: [0.19.8.1]
      buildable: false
      externals:
      - spec: gettext@0.19.8.1
        prefix: /usr
    m4:
      buildable: false
      externals:
      - spec: m4@1.4.18
        prefix: /usr
    ncurses:
      variants: +termlib
      externals:
      - spec: ncurses@6.1
        prefix: /usr
    openssl:
      version: [1.1.0i]
      buildable: false
      externals:
      - spec: openssl@1.1.0i
        prefix: /usr
    openssh:
      version: [7.9p1]
      buildable: false
      externals:
      - spec: openssh@7.9p1
        prefix: /usr
    readline:
      version: [7.0]
      buildable: false
      externals:
      - spec: readline@7.0
        prefix: /usr
    slurm:
      buildable: false
      version: [20-11-8-1]
      externals:
      - spec: slurm@20-11-8-1
        prefix: /usr
    tar:
      version: [1.3]
      buildable: false
      externals:
      - spec: tar@1.30
        prefix: /usr
    unzip:
      version: [6.0]
      buildable: false
      externals:
      - spec: unzip@6.0
        prefix: /usr
    util-linux-uuid:
      version: [2.33.1]
      buildable: false
      externals:
      - spec: util-linux-uuid@2.33.1
        prefix: /usr
    xz:
      version: [5.2.3]
      buildable: false
      externals:
      - spec: xz@5.2.3
        prefix: /usr
    zsh:
      version: [5.6]
      buildable: false
      externals:
      - spec: zsh@5.6
        prefix: /usr
